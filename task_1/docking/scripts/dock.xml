<ROSETTASCRIPTS>

	<SCOREFXNS>
		<ScoreFunction name="ligand_soft_rep" weights="ligand_soft_rep">
		</ScoreFunction>
		<ScoreFunction name="hard_rep" weights="ligand">
			<Reweight scoretype="fa_intra_rep" weight="0.005"/>
		</ScoreFunction>
	</SCOREFXNS>

	<LIGAND_AREAS>
		<LigandArea name="inhibitor_dock_sc" chain="X" cutoff="6.0" add_nbr_radius="true" all_atom_mode="false"/>
		<LigandArea name="inhibitor_final_sc" chain="X" cutoff="6.0" add_nbr_radius="true" all_atom_mode="false"/>
		<LigandArea name="inhibitor_final_bb" chain="X" cutoff="7.0" add_nbr_radius="false" all_atom_mode="true" Calpha_restraints="0.3"/>
	</LIGAND_AREAS>

	<INTERFACE_BUILDERS>
		<InterfaceBuilder name="side_chain_for_docking" ligand_areas="inhibitor_dock_sc"/>
		<InterfaceBuilder name="side_chain_for_final" ligand_areas="inhibitor_final_sc"/>
		<InterfaceBuilder name="backbone" ligand_areas="inhibitor_final_bb" extension_window="3"/>
	</INTERFACE_BUILDERS>

	<MOVEMAP_BUILDERS>
		<MoveMapBuilder name="docking" sc_interface="side_chain_for_docking" minimize_water="false"/>
		<MoveMapBuilder name="final" sc_interface="side_chain_for_final" bb_interface="backbone" minimize_water="false"/>
	</MOVEMAP_BUILDERS>

	<SCORINGGRIDS ligand_chain="X" width="35">
		<ClassicGrid grid_name="classic" weight="1.0"/>
	</SCORINGGRIDS>

	<MOVERS>
		<StartFrom name="start" chain="X">
			<Coordinates x="%%x%%" y="%%y%%" z="%%z%%"  />
		</StartFrom>
		<Transform name="transform" chain="X" box_size="5.0" move_distance="0.05" angle="5" cycles="500" repeats="1" temperature="10" initial_perturb="3" />
		<HighResDocker name="high_res_docker" cycles="6" repack_every_Nth="3" scorefxn="ligand_soft_rep" movemap_builder="docking"/>
		<FinalMinimizer name="final" scorefxn="hard_rep" movemap_builder="final"/>
		<InterfaceScoreCalculator name="add_scores" chains="X" scorefxn="hard_rep"/> 
	</MOVERS>
	<FILTERS>
		<Ddg name="ddg" scorefxn="hard_rep" chain_num="2" threshold="%%maxddg%%"/>
	</FILTERS>

	<PROTOCOLS>
		<Add mover_name="start"/>
		<Add mover_name="transform"/>
		<Add mover_name="high_res_docker"/>
		<Add mover_name="final"/>
		<Add mover_name="add_scores"/>
		<Add filter_name="ddg"/>
	</PROTOCOLS>

</ROSETTASCRIPTS>

